<script>
    // Function to calculate salary loan
    function calculateSalaryLoan(loanAmount, loanTerm) {
        const interestRate = 0.04; // 4% monthly interest for salary loan
        const totalInterest = loanAmount * interestRate * loanTerm;
        const totalRepayment = loanAmount + totalInterest;
        const monthlyPayment = totalRepayment / loanTerm; // Monthly repayment

        return {
            totalRepayment,
            monthlyPayment
        };
    }

    // Function to calculate product loan
    function calculateProductLoan(loanAmount, loanTerm) {
        const interestRate = 0.03; // 3% monthly interest for product loan
        const totalInterest = loanAmount * interestRate * loanTerm;
        const totalRepayment = loanAmount + totalInterest;
        const semiMonthlyPayment = totalRepayment / (loanTerm * 2); // Semi-monthly repayment

        return {
            totalRepayment,
            semiMonthlyPayment
        };
    }

    document.getElementById('loanType').addEventListener('change', function() {
        const loanType = document.getElementById('loanType').value;
        const loanAmountContainer = document.getElementById('loanAmountContainer');

        // Clear existing content
        loanAmountContainer.innerHTML = '';

        if (loanType === 'salary') {
            const select = document.createElement('select');
            select.id = 'loanAmount';
            [5000, 6000, 7000, 8000, 9000, 10000, 11000, 12000, 13000, 14000, 15000, 16000, 17000, 18000, 19000, 20000].forEach(amount => {
                const option = document.createElement('option');
                option.value = amount;
                option.textContent = amount;
                select.appendChild(option);
            });
            loanAmountContainer.appendChild(select);
        } else if (loanType === 'product') {
            const input = document.createElement('input');
            input.type = 'number';
            input.id = 'loanAmount';
            input.placeholder = 'Enter amount';
            loanAmountContainer.appendChild(input);
        }
    });

    document.getElementById('calculateButton').addEventListener('click', function() {
        const loanType = document.getElementById('loanType').value;
        const loanAmountElement = document.getElementById('loanAmount');
        const loanAmount = parseFloat(loanAmountElement.value);
        const loanTerm = parseInt(document.getElementById('loanTerm').value);
        const resultDiv = document.getElementById('result');

        if (isNaN(loanAmount) || isNaN(loanTerm)) {
            resultDiv.textContent = "Please enter valid loan amount and term.";
            return;
        }

        let result;

        if (loanType === 'salary') {
            // Salary Loan Term validation
            if (loanTerm < 1 || loanTerm > 3) {
                resultDiv.textContent = "For Salary Loan, the term must be between 1 and 3 months.";
                return;
            }

            result = calculateSalaryLoan(loanAmount, loanTerm);
        } else if (loanType === 'product') {
            // Product Loan Term validation
            if (loanTerm < 1 || loanTerm > 6) {
                resultDiv.textContent = "For Product Loan, the term must be between 1 and 6 months.";
                return;
            }

            result = calculateProductLoan(loanAmount, loanTerm);
        }

        resultDiv.textContent = `Total Repayment: PHP ${result.totalRepayment.toFixed(2)} | ` +
                                (loanType === 'salary' ? `Monthly Payment: PHP ${result.monthlyPayment.toFixed(2)}` : 
                                `Semi-Monthly Payment: PHP ${result.semiMonthlyPayment.toFixed(2)}`);
    });
</script>
